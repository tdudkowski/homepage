---
title: "Gatsby cz. 3 - CSS"
section: "blog"
subsection: "it"
date: 2021-07-26
edited:
image: ../images/Gatsby_Monogram.png
tags: react, gatsby, css
description: "Jak w Gatsbym zastosowa CSS: global.css, CSS-in-JS, frameworki i biblioteki CSS, preprocesory, Font Awesome, Google Fonts, Bootstrap Icons."
---

### Wstp

Generalnie rzecz biorc wszyskie rozwizania CSS dla Gatsby'ego mo偶na podzieli na cztery grupy:

- style globalne - takie jak przedstawione poni偶ej layout.css lub global.css
- CSS-in-JS czyli albo Styled Components, albo CSS Modules, tutaj om贸wiem jeszcze Emotion
- ca reszt, czyli g贸wnie importy framework贸w i bibliotek CSS: Bootstrap i MDB, Chakra UI, Bulma, Tailwind
- preprocesory CSS: Stylus, Less, SASS (oraz SCSS)

W sumie 13 rozwiaza. Na wstpie dwie uwagi:

- Niniejszy wpis nie jest manualem, chodzi mi raczej o typowe how-to-start, czyli jak wyglda proces implementacji danego rozwiazania i jakie ma podstawowe cechy.
- Nie jest te偶 kompletny, ale jak sdz, wymieniem wikszo mo偶liwoci, kt贸ra jest rzeczywicie u偶ywana.

### Layout.css

Najprostszym sposobem na u偶ycie CSS w Gatsbym jest import pliku CSS bezporednio do pliku strony, lub co ma wicej sensu do komponentu layoutu, kt贸ry u偶ywany jest przez pliki stron.

Najczciej, tak jak to jest zalecane w dokumentacji, tworzy si plik layout.css znajdujcy si razem z kompnentami w katalogu /src/components importowany potem w pliku layout.js:

```js
import * as React from "react"
import "./layout.css"

//
```

I dziaa od razu. Be偶 偶adnej konfiguracji czy restartu.

Na dobr spraw, w przypadku prostych stron mo偶na tam umieci cay CSS i mie t spraw z gowy.

W praktyce jednak stosowane jest na pocztku w procesie budowania strony, 偶eby mie jaki CSS na starcie. Potem mo偶na z tego zrezygnowa, albo zostawi tam baz layoutu. Dokadniej jest to opisane we wpisie o komponentach w rozdziale "CSS".

### Global styles

Innym rodzajem stylu globalnego jest umieszczenie pliku w miejscu gdzie Gatsby domylnie szuka CSS, czyli /src/styles/global.css. Jest to odpowiednik domylnej strony g贸wnej szukanej pod adresem /src/pages/index.js.

呕eby zadziaa globalnie trzeba dodatkowo u偶y wrappera, czyli pliku konfiguracyjnego gatsby-browser.js:

**/gatsby-browser.js**

```js
import "./src/styles/global.css"
```

Ma to t przewag, 偶e wszystkie pliki CSS trzymamy w oddzielnym, specjalnie do tego celu przeznaczonym katalogu. Przybli偶a to nas do klasycznego postulatu rozdzielenia liniowo uo偶onej treci i wygldu. Rzecz jednak w tym, 偶e ten podzia ju偶 dawno w praktyce sta si bezcelowy. Wszak w caym ekosystemie framework贸w JS tre i goy ukad w JSX (odpowiedniku HTML) jest owinita w JS i wszystkie inne rozwizania CSS - poza stylami globalnymi w /src/styles - mieszaj to jeszcze bardziej.

Style globalne tak samo jak plik layout.css maj zastosowanie tylko na stronach, kt贸re
- nie wymagaj zr贸偶nicowania styl贸w
- ani waciwoci CSS-in-JS
- framework贸w CSS takich jak Botstrap, czy Bulma

Podstawowym problemem, z kt贸rego wynika ich niekompatybilno z innymi rozwizaniami jest nieograniczone przenikanie, kt贸re jest nieprzewidywalne i nie daje si zatrzyma.

Natomiast mo偶na je to zastosowa do plik贸w resetu, czy normalizacji.

- [Standard Styling with Global CSS Files](https://www.gatsbyjs.com/docs/how-to/styling/global-css/)

### Styled Components

Z dw贸ch najwazniejszych rozwiza CSS-in-JS za najlepszy uwa偶am Styled Components, dlatego om贸wi to najpierw. Styled Components nie u偶ywa osobnych plik贸w. Plugin importuje si do komponent贸w (plik贸w stron i wszystkich innych komponent贸w) i wpisane do nich reguy aplikuj si wyacznie lokalnie, nie przenikaj na zewntrz. Wasnie w tym celu pwostay.

Je偶eli stworzymy plik kompnentu tworzcego dowolny element layoutu, zastosowane tam style zgodnie z reguami CSS zostan zastosowane tylko do tego komponentu i wszystkich komponent贸w w nim zagnie偶d偶onych.

Maj przy tym waciwoci, kt贸rych nie ma zwyky CSS i to te偶 decyduje o jakoci tego rozwizania.

Po zainstalowaniu zastosowanie wyglda tak:

- import pluginu (linia 2)
- utworzenie elementu stylowanego (linie 4-6)
- umieszczenie go w kodzie JSX (linie 11-13)

```js {numberLines}
import * as React from "react"
import styled from "styled-components"

const StyledDiv = styled.div`
// reguy CSS
`;

const PrzykladowyKomponent = () => {
  return (
    //
    <StyledDiv>
      ...
    </StyledDiv>
```

Jak wida na powy偶szym przykadzie definicje styli umieszcza si poza renderem (przed returnem).

Przykad:

- normalny CSS
- zmiana na hover
- CSS dla zagnie偶d偶onego elementu, ampersand oznacza tu stylowany element, kt贸ry dla tego diva jest rodzicem
- j.w. z tym, 偶e u偶yto tu selektora oznaczajacego bezposrednie dziecko
- j.w. z tym 偶e tryb ciemny
- media query

```css {numberLines}
font-size:1.1rem;
&:hover {color: red}
& div {color: red;}
& > div {color: red;}
.dark & > div {color: yellow;}
@media(min-width: 900px) {
  //
}
```

To s normalne waciwoci CSS, ale Styled Components potrafi wicej:

Stylowa mo偶na inne stylowane komponenty, tak偶e importowane:

```js
import StyledDiv from "./styleddiv"

const StyledHero = styled(StyledDiv)`
//
`;
```

Przekazywanie props贸w - w tym wypadku w stylowanym elemencie jest props `background={tutaj_ades_obrazka}`:

```css
background: url(${props => props.background}) no-repeat top center;
```

W nawiasach wsatych mo偶na przekaza dowolny JS, w tym wypadku jest to funkcja strzakowa z propsem jako parametrem i ciaem funkcji postaci wyodrbnionej nazwy przekazanego propsa.

Mo偶na tam te偶 umieci operator warunkowy (ternary) lub logiczny OR, w obu poni偶szych przypadkach istnieje warto domylna.

- pojedynczy props w tym wypadku np. `red`, tutaj nazwa jest dowolna:
- props przekazany w wartoci `color="red"`, tutaj nazwa jest wycigana z props贸w, do zastosowania jeli mamy kilka propsow w elemencie (analogicznie jak w pierwszym przykadzie):

```css
border-color: ${props => props ? "red" : 'black'};
border-color: ${props => props.color || 'black'};
```

Tutaj tylko zarysowaem najwa偶niejsze, najczciej u偶ywane waciwoci Styled Components. Podobnie jak w przypadku ni偶ej wymienionych po wicej odsyam do dokumentacji.

- [styled-components](https://styled-components.com)
- [hello roman "Styled components + Gatsby.js" [YT playlista 5 film贸w]](https://www.youtube.com/playlist?list=PLKnxnWdLGM48DUzxZ1uSYBhgPNETsgWA_)

### CSS Modules

W Gatsbym dziaa bez instalacji pluginu. Zasadniczo polega to na imporcie CSS jako obiekt JS.

Konwencj jest nazywanie arkuszy styli z umieszczeniem sowa module, przykad: `style.module.css`. Jest to zwyczajny plik CSS. Za贸偶my, 偶e s tam klasy `.outer` i `.inner`.

Import na dwa mo偶liwe sposoby wyglda tak:

```js
import { outer, inner } from "../styles/styles.module.css"
import * as styles from "../styles/styles.module.css"
//

<div className={ outer }>
  <p className={ inner }>Tre akapitu</p>
</div>

<div className={ styles.outer }>
  <p className={`inner ${styles.inner}`}>Tre akapitu</p>
</div>
```

Jak wida mo偶na zaimportowa wybran klas lub klasy jako obiekt i umieci bezposrednio w deklaracji klasy elementu JSX, lub zaimportowa cay arkusz i odwoywa si do niego.

Dynamicznie modyfikuje nazwy styli by zachowa unikalno. Ostatni zapis zapewni nadanie dw贸ch klas: jedna bdzie zmodyfikowana `styles-module--inner--1JjqS`, druga w tym przypadku bdzie `inner`.

Ma t zalet, 偶e ppzwala na trzymanie wszystkich klas w jednym katalogu.

- [css-modules / css-modules](https://github.com/css-modules/css-modules)
- Gatsby [Component-Scoped Styles with CSS Modules](https://www.gatsbyjs.com/docs/how-to/styling/css-modules/) | [Part 2: Use and Style React Components #Style components with CSS Modules](https://www.gatsbyjs.com/docs/tutorial/part-2/#style-components-with-css-modules)

### Emotion

Instalacja

```
$ npm i gatsby-plugin-emotion @emotion/react @emotion/styled
```

**/gatsby-config.js**

```js
`gatsby-plugin-emotion`,
```

Jak widac poni偶ej bardzo przypomina styled-components:

```js
import React from "react"
import styled from "@emotion/styled"
import { css } from "@emotion/react"

const Element = styled.div`
//
`

const Wrapper = styled.div`
//
`

const Card = props => {
  <Element>
    <h3>{props.title}</h3>
    <p>{props.text}</p>
  </Element>
}

const PageEmotion = () => {
return (
  <Wrapper>
    <Card
      title = "Pierwsza Karta"
      text = "Tre pierwszej karty"
    />
    <Card
      title = "Druga Karta"
      text = "Tre drugiej karty"
    />
  </Wrapper>
)
}

export default PageEmotion
```

Dodatkowo Emotion umo偶liwia trzymanie wszystkich styl贸w i utworzonych komponent贸w w plikach JS, np. w katalogu /src/styles/emotion.

**/src/styles/emotion/styles.js**

```js
import styled from "@emotion/styled"

export const Element = styled.div`
//
`

export const Wrapper = styled.div`
//
`
```

Import

```js
import { Element, Wrapper } from "../styles/emotion/styles"
import Card from "./Card"
```

- [Emotion](https://emotion.sh/docs/introduction)
- Gatsby [Emotion](https://www.gatsbyjs.com/docs/how-to/styling/emotion/)

### Bootstrap i MDB

Instalacja:

```sh
$ npm i bootstrap
```

**/gatsby-browser**:

```js
import "bootstrap/dist/css/bootstrap.min.css"
```

I po restarcie mo偶emy korzysta z klas Bootstrapa i jego metod globalnie na caej stronie, trzeba tylko pamita, 偶eby wszystkie class zamieni na className.

Innym rozwizaniem niewymagajcym instalacji jest cignicie pakietu, rozpakowanie go w np. w src/styles i importowanie bezporednio do pliku strony:

```js
import "../styles/bootstrap-5.0.2-dist/css/bootstrap.min.css"
```

MDB.

Instalacja - z powodu starych zale偶noci musiaem u偶y opcji --legacy-peer-deps, potem Gatsbny zgosi brak moduu react-is, wic w kocu wyglda to tak:

```js
$ npm i mdbreact react-is --legacy-peer-deps
```

**/gatsby-browser.js**

```js
import '@fortawesome/fontawesome-free/css/all.min.css'
import 'bootstrap-css-only/css/bootstrap.min.css'
import 'mdbreact/dist/css/mdb.css'
```

I wszystko dziaa, dziki wrapperowi nie trzeba do plik贸w wpisywa import贸w.

- Bootstrap [Download #npm](https://getbootstrap.com/docs/5.0/getting-started/download/#npm)
- [BootstrapCDN](https://www.bootstrapcdn.com/)
- ["Adding Bootstrap CDN link to Gatsby"](https://coleruche.com/post/Adding-Bootstrap-CDN-in-Gatsby/)
- MDB [Download & installation guide](https://mdbootstrap.com/docs/standard/getting-started/installation/)
- Anna Morawska ["Gatsby & MDB React - quick start quide"](https://mdbootstrap.com/articles/react/gatsby-mdb-react-quick-start-quide/)

### Chakra UI

Biblioteka komponent贸w.

Instalacja

```
$ npm i gatsby-plugin-chakra-ui @chakra-ui/core @emotion/core @emotion/styled emotion-theming
```

Dodanie w gatsby-config.js:

```
"@chakra-ui/gatsby-plugin",
```

Import potrzebnych komponent贸w do pliku, prosz zwr贸ci uwag, 偶e trzeba zmieni nazw w imporcie natywnego komponentu Link, 偶eby u偶y komponentu Chakra UI o tej samej nazwie:

```js
import * as React from "react"
import { Link as GatsbyLink } from "gatsby"
import { Box, Text, Link, ListItem, UnorderedList } from "@chakra-ui/core";

//

<Box as="header">
  <Link as={GatsbyLink} activeClassName="menuLinkActive" className="link-header" to="/">
    <Text as="h1">Tytu strony</Text>
  </Link>
  <UnorderedList className="menu">
    <ListItem><Link as={GatsbyLink} activeClassName="menuLinkActive" to="/">home</Link></ListItem>
    <ListItem><Link as={GatsbyLink} activeClassName="menuLinkActive" to="/about">about</Link></ListItem>
//
  </UnorderedList>
</Box>
```

- [Chakra UI](https://chakra-ui.com/)
- [gatsby-plugin-chakra-ui](https://www.gatsbyjs.com/plugins/gatsby-plugin-chakra-ui/)

### Tailwind

Wzbudzajcy wiele kontrowersji framework CSS. Kocha si go lub nienawidzi. W tym wpisie jest wielkim trzynastym. Po przeczytaniu instrukcji instalacji w dokumentacji Gatsby'ego stwierdziem, 偶e mo偶e kiedy indziej.

Je偶lei potrzebujesz to lepiej zobaczy od razu konkretne odnoniki ni偶 nic, wic p贸ki co zostawiam to tak jak jest i mam nadziej, 偶e kiedy wr贸c do tematu.

Instalacja:

```js
$ npm i gatsby-plugin-postcss tailwindcss@latest postcss@latest autoprefixer@latest
$ npx tailwindcss init -p
```

**/gatsby-config.js**

```js
'gatsby-plugin-postcss'
```

**/src/styles/global.css**

```css
@tailwind base;
@tailwind components;
@tailwind utilities;
```

**/gatsby-browser.js**

```js
import './src/styles/global.css';
```

I to ju偶 wszystko. W najwikszym uproszczeniu, bo reguy Tailwinda dziaaj, ale pozostaje jeszcze jego konfiguracja, optymalizacja, no i wejcie w gb tego frameworka.

- [Tailwind CSS](https://tailwindcss.com/) | [Install Tailwind CSS with Gatsby](https://tailwindcss.com/docs/guides/gatsby)
- Gatsby [Tailwind CSS](https://www.gatsbyjs.com/docs/how-to/styling/tailwind-css/)

### Bulma

Biblioteka CSS bez JS, dziki czemu atwo si integruje w rodowisku JS.

Najprociej cign i rozpakowa w katalogu /src/styles i zaimportowa lokalny plik przez wrappera.

**/gatsby-browser.js**

```js
import "/src/styles/bulma/css/bulma.min.css"
```

I dziaa jak specyfikacja chciaa. Je偶eli dopisujemy wasne arkusze styl贸w trzeba je importowa. Bulma jest silnie zorientowana na u偶ycie SCSS i SASS.

Oczywicie mo偶na te偶 zainstalowa pakiet npm, najlepiej od razu z Sassem.

```
$ npm i bulma sass gatsby-plugin-sass
```

i doda w gatsby-config.js:

```js
`gatsby-plugin-sass`,
```

- [Bulma](https://bulma.io/) | [With node-sass](https://bulma.io/documentation/customize/with-node-sass/)
- Gatsby [Bulma](https://www.gatsbyjs.com/docs/how-to/styling/bulma/)

### Stylus

Preprocesor CSS.

Instalacja.

```
$ npm i gatsby-plugin-stylus
```

**/gatsby-config.js**

```js
`gatsby-plugin-stylus`,
```

Pliki Stylusa maj rozszerzenie .styl. Mo偶na je trzyma w katalogu /src/styles/stylus. Importuje si je do plik贸w.

- [Stylus](https://stylus-lang.com/)
- [gatsby-plugin-stylus](https://www.gatsbyjs.com/plugins/gatsby-plugin-stylus/) | [gatsby-plugin-stylus](https://github.com/gatsbyjs/gatsby/tree/master/packages/gatsby-plugin-stylus)

### Less

Instalacja:

```
$ npm i gatsby-plugin-less
```

**/src/gatsby-config.js**

```js
`gatsby-plugin-less`,
```

- [Less.js](https://lesscss.org/)
- [gatsby-plugin-less](https://www.gatsbyjs.com/plugins/gatsby-plugin-less/)

Pliki Lessa maj rozszerzenie .less. Tak samo jak w przypadku Stylusa, mo偶na je trzyma w katalogu /src/styles i trzeba je zaimportowa do pliku.

### SASS

Sass ma dwie skadnie (i jak wida dwie pisownie, czasem pisze si jego nazw jak typowy akronim a czasem jako nazw wasn):

- starsza i mniej popularna operujca na wciciach, nazywana po prostu Sass
- SCSS nowsza, czciej u偶ywana, zgodna z CSS-em

Instalacja:

```
$ npm i sass gatsby-plugin-sass
```

**/gatsby-config.js**

```js
`gatsby-plugin-sass`,
```

- [Using Sass in Gatsby](https://www.gatsbyjs.com/docs/how-to/styling/sass/) | [gatsby-plugin-sass](https://www.gatsbyjs.com/plugins/gatsby-plugin-sass/)

### Fonty

Ze wzgldu na op贸藕nienie spowodowane przez aczenie si z zewntrznymi bibliotekami dokumentacja Gatsby'ego odradza importowanie bibliotek font贸w i glif贸w. Zdecydowanie lepiej jest cign je do katalogu strony i zaimportowa lokalnie.

#### Font Awesome

Instalacja:

```
$ npm i @fortawesome/fontawesome-svg-core @fortawesome/free-brands-svg-icons @fortawesome/react-fontawesome
```

Import do pliku

```js
import { FontAwesomeIcon } from "@fortawesome/react-fontawesome"
import { faReact } from "@fortawesome/free-brands-svg-icons"

//

<FontAwesomeIcon icon={faReact} />
```

#### Google Fonts

Instalacja

```
$ npm i @fontsource/open-sans
```

Import:

```js
import "@fontsource/open-sans"
```

#### Bootstrap Icons

Instalacja:

```
$ npm i react-bootstrap-icons
```

Import:

```js
import { ArrowRight } from 'react-bootstrap-icons';

//

<ArrowRight className="bigredone" />
```

### Odnoniki

- [Gatsby Plugin Purgecss](https://www.gatsbyjs.com/plugins/gatsby-plugin-purgecss/) Remove unused css from css/sass/less/stylus files and modules in your Gatsby project using purgecss. . Supports tailwind, bootstrap, bulma etc.
- Adebiyi Adedotun [10 Gatsby styling methods](https://blog.logrocket.com/10-gatsby-styling-methods/)
- Arley McBlain [Saving the Day with Scoped CSS](https://css-tricks.com/saving-the-day-with-scoped-css/)
- Andrei Pfeiffer ["A Thorough Analysis of CSS-in-JS"](https://css-tricks.com/a-thorough-analysis-of-css-in-js/)
- Chris Coyier [The Differing Perspectives on CSS-in-JS](https://css-tricks.com/the-differing-perspectives-on-css-in-js/)
